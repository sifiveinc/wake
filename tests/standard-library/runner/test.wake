export def testRunnerFailFinish _ =
    def run job input =
        def (Runner _ virtRun) = virtualRunner
        def result = virtRun job input

        # Force a failure outside of the actual job
        result
        | setRunnerOutputRunnerError (Some "Mark job as failure".makeError)

    def testRunner = makeRunner "" run

    makeExecPlan ("<test>", Nil) Nil
    | runJobWith testRunner
    | isJobOk
